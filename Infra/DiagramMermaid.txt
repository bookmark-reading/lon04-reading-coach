flowchart TB

  subgraph Client
    UI["Reading App UI"]
  end

  subgraph Auth
    Cognito["Amazon Cognito User Pool"]
  end

  subgraph API
    APIGW["API Gateway HTTP API"]
    L1["Lambda GET me"]
    L2["Lambda GET books"]
    L3["Lambda GET book download URL"]
  end

  subgraph Data
    DDB1["DynamoDB UserProfiles"]
    DDB2["DynamoDB Books"]
    S3["Amazon S3 PDF Bucket"]
  end

  subgraph Core
    CORE["CORE_ENGINE\nPDF processing and reading logic"]
  end

  UI -->|Sign in| Cognito
  Cognito -->|JWT token| UI

  UI -->|API calls| APIGW
  APIGW --> L1
  APIGW --> L2
  APIGW --> L3

  L1 --> DDB1
  L2 --> DDB2
  L3 --> DDB2
  L3 -->|Create pre-signed URL| S3

  UI -->|Request PDF| CORE
  CORE -->|Fetch PDF| S3
  CORE -->|Stream text chunks| UI
